<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.amayadream.webchat.core.dao.IMessageDao">

    <select id="selectByPrimaryKey" resultType="Message" parameterType="long">
        SELECT id, sender, receiver, content, send_time FROM message
        WHERE id = #{id, jdbcType=BIGINT}
    </select>

    <select id="list" resultType="Message" parameterType="Message">
        SELECT id, sender, receiver, content, send_time FROM message
        <where>
            <if test="sender != null and sender != ''">
                sender = #{sender, jdbcType=VARCHAR}
            </if>
            <if test="receiver != null and receiver != ''">
                AND receiver = #{receiver, jdbcType=VARCHAR}
            </if>
        </where>
    </select>

    <insert id="insert" parameterType="Message">
        INSERT INTO message (sender, receiver, content, send_time)
        VALUES (#{sender, jdbcType=VARCHAR}, #{receiver, jdbcType=VARCHAR}, #{content, jdbcType=VARCHAR},
                #{sendTime, jdbcType=TIMESTAMP})
    </insert>

</mapper>